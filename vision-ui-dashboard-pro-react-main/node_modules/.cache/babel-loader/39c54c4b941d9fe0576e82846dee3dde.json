{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ContractQueryResponse = exports.ContractResultItem = exports.ContractResults = void 0;\n\nconst bignumber_js_1 = require(\"bignumber.js\");\n\nconst address_1 = require(\"../address\");\n\nconst balance_1 = require(\"../balance\");\n\nconst hash_1 = require(\"../hash\");\n\nconst networkParams_1 = require(\"../networkParams\");\n\nconst nonce_1 = require(\"../nonce\");\n\nconst smartcontracts_1 = require(\"../smartcontracts\");\n\nconst transaction_1 = require(\"../transaction\");\n\nclass ContractResults {\n  constructor(items) {\n    this.items = items;\n    this.items.sort(function (a, b) {\n      return a.nonce.valueOf() - b.nonce.valueOf();\n    });\n  }\n\n  static empty() {\n    return new ContractResults([]);\n  }\n\n  static fromProxyHttpResponse(results) {\n    let items = results.map(item => ContractResultItem.fromProxyHttpResponse(item));\n    return new ContractResults(items);\n  }\n\n  static fromApiHttpResponse(results) {\n    let items = results.map(item => ContractResultItem.fromApiHttpResponse(item));\n    return new ContractResults(items);\n  }\n\n}\n\nexports.ContractResults = ContractResults;\n\nclass ContractResultItem {\n  constructor() {\n    this.hash = hash_1.Hash.empty();\n    this.nonce = new nonce_1.Nonce(0);\n    this.value = balance_1.Balance.Zero();\n    this.receiver = new address_1.Address();\n    this.sender = new address_1.Address();\n    this.data = \"\";\n    this.previousHash = hash_1.Hash.empty();\n    this.originalHash = hash_1.Hash.empty();\n    this.gasLimit = new networkParams_1.GasLimit(0);\n    this.gasPrice = new networkParams_1.GasPrice(0);\n    this.callType = 0;\n    this.returnMessage = \"\";\n  }\n\n  static fromProxyHttpResponse(response) {\n    let item = ContractResultItem.fromHttpResponse(response);\n    return item;\n  }\n\n  static fromApiHttpResponse(response) {\n    let item = ContractResultItem.fromHttpResponse(response);\n    item.data = Buffer.from(item.data, \"base64\").toString();\n    item.callType = Number(item.callType);\n    return item;\n  }\n\n  static fromHttpResponse(response) {\n    let item = new ContractResultItem();\n    item.hash = new transaction_1.TransactionHash(response.hash);\n    item.nonce = new nonce_1.Nonce(response.nonce || 0);\n    item.value = balance_1.Balance.fromString(response.value);\n    item.receiver = new address_1.Address(response.receiver);\n    item.sender = new address_1.Address(response.sender);\n    item.previousHash = new transaction_1.TransactionHash(response.prevTxHash);\n    item.originalHash = new transaction_1.TransactionHash(response.originalTxHash);\n    item.gasLimit = new networkParams_1.GasLimit(response.gasLimit);\n    item.gasPrice = new networkParams_1.GasPrice(response.gasPrice);\n    item.data = response.data || \"\";\n    item.callType = response.callType;\n    item.returnMessage = response.returnMessage;\n    return item;\n  }\n\n  getOutputUntyped() {\n    // TODO: Decide how to parse \"data\" (immediate results vs. other results).\n    throw new Error(\"Method not implemented.\");\n  }\n\n  getOutputTyped(_endpointDefinition) {\n    // TODO: Decide how to parse \"data\" (immediate results vs. other results).\n    throw new Error(\"Method not implemented.\");\n  }\n\n}\n\nexports.ContractResultItem = ContractResultItem;\n\nclass ContractQueryResponse {\n  constructor() {\n    this.returnData = [];\n    this.returnCode = smartcontracts_1.ReturnCode.None;\n    this.returnMessage = \"\";\n    this.gasUsed = new networkParams_1.GasLimit(0);\n  }\n\n  static fromHttpResponse(payload) {\n    let response = new ContractQueryResponse();\n    let gasRemaining = new bignumber_js_1.BigNumber(payload[\"gasRemaining\"] || payload[\"GasRemaining\"] || 0);\n    response.returnData = payload[\"returnData\"] || [];\n    response.returnCode = payload[\"returnCode\"] || \"\";\n    response.returnMessage = payload[\"returnMessage\"] || \"\";\n    response.gasUsed = new networkParams_1.GasLimit(smartcontracts_1.MaxUint64.minus(gasRemaining).toNumber());\n    return response;\n  }\n\n  getOutputUntyped() {\n    let buffers = this.returnData.map(item => Buffer.from(item || \"\", \"base64\"));\n    return buffers;\n  }\n\n  getOutputTyped(endpointDefinition) {\n    let buffers = this.getOutputUntyped();\n    let values = new smartcontracts_1.ArgSerializer().buffersToValues(buffers, endpointDefinition.output);\n    return values;\n  }\n\n}\n\nexports.ContractQueryResponse = ContractQueryResponse;","map":{"version":3,"sources":["../../src/networkProvider/contractResults.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ContractQueryResponse = exports.ContractResultItem = exports.ContractResults = void 0;\nconst bignumber_js_1 = require(\"bignumber.js\");\nconst address_1 = require(\"../address\");\nconst balance_1 = require(\"../balance\");\nconst hash_1 = require(\"../hash\");\nconst networkParams_1 = require(\"../networkParams\");\nconst nonce_1 = require(\"../nonce\");\nconst smartcontracts_1 = require(\"../smartcontracts\");\nconst transaction_1 = require(\"../transaction\");\nclass ContractResults {\n    constructor(items) {\n        this.items = items;\n        this.items.sort(function (a, b) {\n            return a.nonce.valueOf() - b.nonce.valueOf();\n        });\n    }\n    static empty() {\n        return new ContractResults([]);\n    }\n    static fromProxyHttpResponse(results) {\n        let items = results.map(item => ContractResultItem.fromProxyHttpResponse(item));\n        return new ContractResults(items);\n    }\n    static fromApiHttpResponse(results) {\n        let items = results.map(item => ContractResultItem.fromApiHttpResponse(item));\n        return new ContractResults(items);\n    }\n}\nexports.ContractResults = ContractResults;\nclass ContractResultItem {\n    constructor() {\n        this.hash = hash_1.Hash.empty();\n        this.nonce = new nonce_1.Nonce(0);\n        this.value = balance_1.Balance.Zero();\n        this.receiver = new address_1.Address();\n        this.sender = new address_1.Address();\n        this.data = \"\";\n        this.previousHash = hash_1.Hash.empty();\n        this.originalHash = hash_1.Hash.empty();\n        this.gasLimit = new networkParams_1.GasLimit(0);\n        this.gasPrice = new networkParams_1.GasPrice(0);\n        this.callType = 0;\n        this.returnMessage = \"\";\n    }\n    static fromProxyHttpResponse(response) {\n        let item = ContractResultItem.fromHttpResponse(response);\n        return item;\n    }\n    static fromApiHttpResponse(response) {\n        let item = ContractResultItem.fromHttpResponse(response);\n        item.data = Buffer.from(item.data, \"base64\").toString();\n        item.callType = Number(item.callType);\n        return item;\n    }\n    static fromHttpResponse(response) {\n        let item = new ContractResultItem();\n        item.hash = new transaction_1.TransactionHash(response.hash);\n        item.nonce = new nonce_1.Nonce(response.nonce || 0);\n        item.value = balance_1.Balance.fromString(response.value);\n        item.receiver = new address_1.Address(response.receiver);\n        item.sender = new address_1.Address(response.sender);\n        item.previousHash = new transaction_1.TransactionHash(response.prevTxHash);\n        item.originalHash = new transaction_1.TransactionHash(response.originalTxHash);\n        item.gasLimit = new networkParams_1.GasLimit(response.gasLimit);\n        item.gasPrice = new networkParams_1.GasPrice(response.gasPrice);\n        item.data = response.data || \"\";\n        item.callType = response.callType;\n        item.returnMessage = response.returnMessage;\n        return item;\n    }\n    getOutputUntyped() {\n        // TODO: Decide how to parse \"data\" (immediate results vs. other results).\n        throw new Error(\"Method not implemented.\");\n    }\n    getOutputTyped(_endpointDefinition) {\n        // TODO: Decide how to parse \"data\" (immediate results vs. other results).\n        throw new Error(\"Method not implemented.\");\n    }\n}\nexports.ContractResultItem = ContractResultItem;\nclass ContractQueryResponse {\n    constructor() {\n        this.returnData = [];\n        this.returnCode = smartcontracts_1.ReturnCode.None;\n        this.returnMessage = \"\";\n        this.gasUsed = new networkParams_1.GasLimit(0);\n    }\n    static fromHttpResponse(payload) {\n        let response = new ContractQueryResponse();\n        let gasRemaining = new bignumber_js_1.BigNumber(payload[\"gasRemaining\"] || payload[\"GasRemaining\"] || 0);\n        response.returnData = payload[\"returnData\"] || [];\n        response.returnCode = payload[\"returnCode\"] || \"\";\n        response.returnMessage = payload[\"returnMessage\"] || \"\";\n        response.gasUsed = new networkParams_1.GasLimit(smartcontracts_1.MaxUint64.minus(gasRemaining).toNumber());\n        return response;\n    }\n    getOutputUntyped() {\n        let buffers = this.returnData.map((item) => Buffer.from(item || \"\", \"base64\"));\n        return buffers;\n    }\n    getOutputTyped(endpointDefinition) {\n        let buffers = this.getOutputUntyped();\n        let values = new smartcontracts_1.ArgSerializer().buffersToValues(buffers, endpointDefinition.output);\n        return values;\n    }\n}\nexports.ContractQueryResponse = ContractQueryResponse;\n//# sourceMappingURL=contractResults.js.map"]},"metadata":{},"sourceType":"script"}