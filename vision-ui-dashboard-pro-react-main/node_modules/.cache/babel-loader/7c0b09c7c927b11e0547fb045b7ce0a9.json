{"ast":null,"code":"\"use strict\";\n\nvar _assertThisInitialized = require(\"/home/ionut/Desktop/xlauncher-presale/vision-ui-dashboard-pro-react-main/node_modules/@babel/runtime/helpers/assertThisInitialized.js\").default;\n\nvar _inherits = require(\"/home/ionut/Desktop/xlauncher-presale/vision-ui-dashboard-pro-react-main/node_modules/@babel/runtime/helpers/inherits.js\").default;\n\nvar _createSuper = require(\"/home/ionut/Desktop/xlauncher-presale/vision-ui-dashboard-pro-react-main/node_modules/@babel/runtime/helpers/createSuper.js\").default;\n\nvar _classCallCheck = require(\"/home/ionut/Desktop/xlauncher-presale/vision-ui-dashboard-pro-react-main/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"/home/ionut/Desktop/xlauncher-presale/vision-ui-dashboard-pro-react-main/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TypedResult = exports.SmartContractResultItem = exports.SmartContractResults = void 0;\n\nvar address_1 = require(\"../address\");\n\nvar balance_1 = require(\"../balance\");\n\nvar hash_1 = require(\"../hash\");\n\nvar networkParams_1 = require(\"../networkParams\");\n\nvar nonce_1 = require(\"../nonce\");\n\nvar transaction_1 = require(\"../transaction\");\n\nvar argSerializer_1 = require(\"./argSerializer\");\n\nvar returnCode_1 = require(\"./returnCode\");\n\nvar result_1 = require(\"./result\");\n\nvar SmartContractResults = /*#__PURE__*/function () {\n  function SmartContractResults(items) {\n    _classCallCheck(this, SmartContractResults);\n\n    this.items = [];\n    this.immediate = new TypedResult();\n    this.resultingCalls = [];\n    this.items = items;\n\n    if (this.items.length > 0) {\n      var immediateResult = this.findImmediateResult();\n\n      if (immediateResult) {\n        this.immediate = immediateResult;\n      }\n\n      this.resultingCalls = this.findResultingCalls();\n    }\n  }\n\n  _createClass(SmartContractResults, [{\n    key: \"findImmediateResult\",\n    value: function findImmediateResult() {\n      var immediateItem = this.items.filter(function (item) {\n        return isImmediateResult(item);\n      })[0];\n\n      if (immediateItem) {\n        return new TypedResult(immediateItem);\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"findResultingCalls\",\n    value: function findResultingCalls() {\n      var otherItems = this.items.filter(function (item) {\n        return !isImmediateResult(item);\n      });\n      var resultingCalls = otherItems.map(function (item) {\n        return new TypedResult(item);\n      });\n      return resultingCalls;\n    }\n  }, {\n    key: \"getImmediate\",\n    value: function getImmediate() {\n      return this.immediate;\n    }\n  }, {\n    key: \"getResultingCalls\",\n    value: function getResultingCalls() {\n      return this.resultingCalls;\n    }\n  }, {\n    key: \"getAllResults\",\n    value: function getAllResults() {\n      return this.items.map(function (item) {\n        return new TypedResult(item);\n      });\n    }\n  }], [{\n    key: \"empty\",\n    value: function empty() {\n      return new SmartContractResults([]);\n    }\n  }, {\n    key: \"fromHttpResponse\",\n    value: function fromHttpResponse(smartContractResults) {\n      var items = (smartContractResults || []).map(function (item) {\n        return SmartContractResultItem.fromHttpResponse(item);\n      });\n      return new SmartContractResults(items);\n    }\n  }]);\n\n  return SmartContractResults;\n}();\n\nexports.SmartContractResults = SmartContractResults;\n\nfunction isImmediateResult(item) {\n  return item.nonce.valueOf() != 0;\n}\n\nvar SmartContractResultItem = /*#__PURE__*/function () {\n  function SmartContractResultItem() {\n    _classCallCheck(this, SmartContractResultItem);\n\n    this.hash = hash_1.Hash.empty();\n    this.nonce = new nonce_1.Nonce(0);\n    this.value = balance_1.Balance.Zero();\n    this.receiver = new address_1.Address();\n    this.sender = new address_1.Address();\n    this.data = \"\";\n    this.previousHash = hash_1.Hash.empty();\n    this.originalHash = hash_1.Hash.empty();\n    this.gasLimit = new networkParams_1.GasLimit(0);\n    this.gasPrice = new networkParams_1.GasPrice(0);\n    this.callType = 0;\n    this.returnMessage = \"\";\n  }\n\n  _createClass(SmartContractResultItem, [{\n    key: \"getDataTokens\",\n    value: function getDataTokens() {\n      return new argSerializer_1.ArgSerializer().stringToBuffers(this.data);\n    }\n  }], [{\n    key: \"fromHttpResponse\",\n    value: function fromHttpResponse(response) {\n      var item = new SmartContractResultItem();\n      item.hash = new transaction_1.TransactionHash(response.hash);\n      item.nonce = new nonce_1.Nonce(response.nonce || 0);\n      item.value = balance_1.Balance.fromString(response.value);\n      item.receiver = new address_1.Address(response.receiver);\n      item.sender = new address_1.Address(response.sender);\n      item.data = response.data || \"\";\n      item.previousHash = new transaction_1.TransactionHash(response.prevTxHash);\n      item.originalHash = new transaction_1.TransactionHash(response.originalTxHash);\n      item.gasLimit = new networkParams_1.GasLimit(response.gasLimit);\n      item.gasPrice = new networkParams_1.GasPrice(response.gasPrice);\n      item.callType = response.callType;\n      item.returnMessage = response.returnMessage;\n      return item;\n    }\n  }]);\n\n  return SmartContractResultItem;\n}();\n\nexports.SmartContractResultItem = SmartContractResultItem;\n\nvar TypedResult = /*#__PURE__*/function (_SmartContractResultI) {\n  _inherits(TypedResult, _SmartContractResultI);\n\n  var _super = _createSuper(TypedResult);\n\n  function TypedResult(init) {\n    var _this;\n\n    _classCallCheck(this, TypedResult);\n\n    _this = _super.call(this);\n    Object.assign(_assertThisInitialized(_this), init);\n    return _this;\n  }\n\n  _createClass(TypedResult, [{\n    key: \"assertSuccess\",\n    value: function assertSuccess() {\n      result_1.Result.assertSuccess(this);\n    }\n  }, {\n    key: \"isSuccess\",\n    value: function isSuccess() {\n      return this.getReturnCode().isSuccess();\n    }\n  }, {\n    key: \"getReturnCode\",\n    value: function getReturnCode() {\n      var tokens = this.getDataTokens();\n\n      if (tokens.length < 2) {\n        return returnCode_1.ReturnCode.None;\n      }\n\n      var returnCodeToken = tokens[1];\n      return returnCode_1.ReturnCode.fromBuffer(returnCodeToken);\n    }\n  }, {\n    key: \"outputUntyped\",\n    value: function outputUntyped() {\n      this.assertSuccess(); // Skip the first 2 SCRs (eg. the @6f6b from @6f6b@2b).\n\n      return this.getDataTokens().slice(2);\n    }\n  }, {\n    key: \"setEndpointDefinition\",\n    value: function setEndpointDefinition(endpointDefinition) {\n      this.endpointDefinition = endpointDefinition;\n    }\n  }, {\n    key: \"getEndpointDefinition\",\n    value: function getEndpointDefinition() {\n      return this.endpointDefinition;\n    }\n  }, {\n    key: \"getReturnMessage\",\n    value: function getReturnMessage() {\n      return this.returnMessage;\n    }\n  }, {\n    key: \"outputTyped\",\n    value: function outputTyped() {\n      return result_1.Result.outputTyped(this);\n    }\n  }, {\n    key: \"unpackOutput\",\n    value: function unpackOutput() {\n      return result_1.Result.unpackOutput(this);\n    }\n  }]);\n\n  return TypedResult;\n}(SmartContractResultItem);\n\nexports.TypedResult = TypedResult;","map":{"version":3,"sources":["../../src/smartcontracts/smartContractResults.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypedResult = exports.SmartContractResultItem = exports.SmartContractResults = void 0;\nconst address_1 = require(\"../address\");\nconst balance_1 = require(\"../balance\");\nconst hash_1 = require(\"../hash\");\nconst networkParams_1 = require(\"../networkParams\");\nconst nonce_1 = require(\"../nonce\");\nconst transaction_1 = require(\"../transaction\");\nconst argSerializer_1 = require(\"./argSerializer\");\nconst returnCode_1 = require(\"./returnCode\");\nconst result_1 = require(\"./result\");\nclass SmartContractResults {\n    constructor(items) {\n        this.items = [];\n        this.immediate = new TypedResult();\n        this.resultingCalls = [];\n        this.items = items;\n        if (this.items.length > 0) {\n            let immediateResult = this.findImmediateResult();\n            if (immediateResult) {\n                this.immediate = immediateResult;\n            }\n            this.resultingCalls = this.findResultingCalls();\n        }\n    }\n    static empty() {\n        return new SmartContractResults([]);\n    }\n    static fromHttpResponse(smartContractResults) {\n        let items = (smartContractResults || []).map((item) => SmartContractResultItem.fromHttpResponse(item));\n        return new SmartContractResults(items);\n    }\n    findImmediateResult() {\n        let immediateItem = this.items.filter(item => isImmediateResult(item))[0];\n        if (immediateItem) {\n            return new TypedResult(immediateItem);\n        }\n        return undefined;\n    }\n    findResultingCalls() {\n        let otherItems = this.items.filter(item => !isImmediateResult(item));\n        let resultingCalls = otherItems.map(item => new TypedResult(item));\n        return resultingCalls;\n    }\n    getImmediate() {\n        return this.immediate;\n    }\n    getResultingCalls() {\n        return this.resultingCalls;\n    }\n    getAllResults() {\n        return this.items.map(item => new TypedResult(item));\n    }\n}\nexports.SmartContractResults = SmartContractResults;\nfunction isImmediateResult(item) {\n    return item.nonce.valueOf() != 0;\n}\nclass SmartContractResultItem {\n    constructor() {\n        this.hash = hash_1.Hash.empty();\n        this.nonce = new nonce_1.Nonce(0);\n        this.value = balance_1.Balance.Zero();\n        this.receiver = new address_1.Address();\n        this.sender = new address_1.Address();\n        this.data = \"\";\n        this.previousHash = hash_1.Hash.empty();\n        this.originalHash = hash_1.Hash.empty();\n        this.gasLimit = new networkParams_1.GasLimit(0);\n        this.gasPrice = new networkParams_1.GasPrice(0);\n        this.callType = 0;\n        this.returnMessage = \"\";\n    }\n    static fromHttpResponse(response) {\n        let item = new SmartContractResultItem();\n        item.hash = new transaction_1.TransactionHash(response.hash);\n        item.nonce = new nonce_1.Nonce(response.nonce || 0);\n        item.value = balance_1.Balance.fromString(response.value);\n        item.receiver = new address_1.Address(response.receiver);\n        item.sender = new address_1.Address(response.sender);\n        item.data = response.data || \"\";\n        item.previousHash = new transaction_1.TransactionHash(response.prevTxHash);\n        item.originalHash = new transaction_1.TransactionHash(response.originalTxHash);\n        item.gasLimit = new networkParams_1.GasLimit(response.gasLimit);\n        item.gasPrice = new networkParams_1.GasPrice(response.gasPrice);\n        item.callType = response.callType;\n        item.returnMessage = response.returnMessage;\n        return item;\n    }\n    getDataTokens() {\n        return new argSerializer_1.ArgSerializer().stringToBuffers(this.data);\n    }\n}\nexports.SmartContractResultItem = SmartContractResultItem;\nclass TypedResult extends SmartContractResultItem {\n    constructor(init) {\n        super();\n        Object.assign(this, init);\n    }\n    assertSuccess() {\n        result_1.Result.assertSuccess(this);\n    }\n    isSuccess() {\n        return this.getReturnCode().isSuccess();\n    }\n    getReturnCode() {\n        let tokens = this.getDataTokens();\n        if (tokens.length < 2) {\n            return returnCode_1.ReturnCode.None;\n        }\n        let returnCodeToken = tokens[1];\n        return returnCode_1.ReturnCode.fromBuffer(returnCodeToken);\n    }\n    outputUntyped() {\n        this.assertSuccess();\n        // Skip the first 2 SCRs (eg. the @6f6b from @6f6b@2b).\n        return this.getDataTokens().slice(2);\n    }\n    setEndpointDefinition(endpointDefinition) {\n        this.endpointDefinition = endpointDefinition;\n    }\n    getEndpointDefinition() {\n        return this.endpointDefinition;\n    }\n    getReturnMessage() {\n        return this.returnMessage;\n    }\n    outputTyped() {\n        return result_1.Result.outputTyped(this);\n    }\n    unpackOutput() {\n        return result_1.Result.unpackOutput(this);\n    }\n}\nexports.TypedResult = TypedResult;\n//# sourceMappingURL=smartContractResults.js.map"]},"metadata":{},"sourceType":"script"}