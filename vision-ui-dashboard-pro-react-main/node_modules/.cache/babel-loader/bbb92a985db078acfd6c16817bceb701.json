{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Balance = void 0;\n\nconst bignumber_js_1 = require(\"bignumber.js\");\n\nconst errors_1 = require(\"./errors\");\n\nconst balanceBuilder_1 = require(\"./balanceBuilder\");\n/**\n * The number of decimals handled when working with EGLD or ESDT values.\n */\n\n\nconst DEFAULT_BIGNUMBER_DECIMAL_PLACES = 18;\nbignumber_js_1.BigNumber.set({\n  DECIMAL_PLACES: DEFAULT_BIGNUMBER_DECIMAL_PLACES,\n  ROUNDING_MODE: 1\n});\n/**\n * Balance, as an immutable object.\n */\n\nclass Balance {\n  /**\n   * Creates a Balance object.\n   */\n  constructor(token, nonce, value) {\n    this.nonce = new bignumber_js_1.BigNumber(0);\n    this.value = new bignumber_js_1.BigNumber(0);\n    this.token = token;\n    this.nonce = new bignumber_js_1.BigNumber(nonce);\n    this.value = new bignumber_js_1.BigNumber(value);\n  }\n  /**\n   * Creates a balance object from an EGLD value (denomination will be applied).\n   */\n\n\n  static egld(value) {\n    return balanceBuilder_1.Egld(value);\n  }\n  /**\n   * Creates a balance object from a string (with denomination included).\n   */\n\n\n  static fromString(value) {\n    return balanceBuilder_1.Egld.raw(value || \"0\");\n  }\n  /**\n   * Creates a zero-valued EGLD balance object.\n   */\n\n\n  static Zero() {\n    return balanceBuilder_1.Egld(0);\n  }\n\n  isZero() {\n    return this.value.isZero();\n  }\n\n  isEgld() {\n    return this.token.isEgld();\n  }\n\n  isSet() {\n    return !this.isZero();\n  }\n  /**\n   * Returns the string representation of the value (as EGLD currency).\n   */\n\n\n  toCurrencyString() {\n    return `${this.toDenominated()} ${this.token.getTokenIdentifier()}`;\n  }\n\n  toDenominated() {\n    return this.value.shiftedBy(-this.token.decimals).toFixed(this.token.decimals);\n  }\n  /**\n   * Returns the string representation of the value (its big-integer form).\n   */\n\n\n  toString() {\n    return this.value.toFixed();\n  }\n  /**\n   * Converts the balance to a pretty, plain JavaScript object.\n   */\n\n\n  toJSON() {\n    return {\n      asString: this.toString(),\n      asCurrencyString: this.toCurrencyString()\n    };\n  }\n\n  getNonce() {\n    return this.nonce;\n  }\n\n  valueOf() {\n    return this.value;\n  }\n\n  plus(other) {\n    this.checkSameToken(other);\n    return new Balance(this.token, this.nonce, this.value.plus(other.value));\n  }\n\n  minus(other) {\n    this.checkSameToken(other);\n    return new Balance(this.token, this.nonce, this.value.minus(other.value));\n  }\n\n  times(n) {\n    return new Balance(this.token, this.nonce, this.value.times(n));\n  }\n\n  div(n) {\n    return new Balance(this.token, this.nonce, this.value.div(n));\n  }\n\n  isEqualTo(other) {\n    this.checkSameToken(other);\n    return this.value.isEqualTo(other.value);\n  }\n\n  checkSameToken(other) {\n    if (this.token != other.token) {\n      throw new errors_1.ErrInvalidArgument(\"Different token types\");\n    }\n\n    if (!this.nonce.isEqualTo(other.nonce)) {\n      throw new errors_1.ErrInvalidArgument(\"Different nonces\");\n    }\n  }\n\n}\n\nexports.Balance = Balance;","map":{"version":3,"sources":["../src/balance.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Balance = void 0;\nconst bignumber_js_1 = require(\"bignumber.js\");\nconst errors_1 = require(\"./errors\");\nconst balanceBuilder_1 = require(\"./balanceBuilder\");\n/**\n * The number of decimals handled when working with EGLD or ESDT values.\n */\nconst DEFAULT_BIGNUMBER_DECIMAL_PLACES = 18;\nbignumber_js_1.BigNumber.set({ DECIMAL_PLACES: DEFAULT_BIGNUMBER_DECIMAL_PLACES, ROUNDING_MODE: 1 });\n/**\n * Balance, as an immutable object.\n */\nclass Balance {\n    /**\n     * Creates a Balance object.\n     */\n    constructor(token, nonce, value) {\n        this.nonce = new bignumber_js_1.BigNumber(0);\n        this.value = new bignumber_js_1.BigNumber(0);\n        this.token = token;\n        this.nonce = new bignumber_js_1.BigNumber(nonce);\n        this.value = new bignumber_js_1.BigNumber(value);\n    }\n    /**\n     * Creates a balance object from an EGLD value (denomination will be applied).\n     */\n    static egld(value) {\n        return balanceBuilder_1.Egld(value);\n    }\n    /**\n     * Creates a balance object from a string (with denomination included).\n     */\n    static fromString(value) {\n        return balanceBuilder_1.Egld.raw(value || \"0\");\n    }\n    /**\n     * Creates a zero-valued EGLD balance object.\n     */\n    static Zero() {\n        return balanceBuilder_1.Egld(0);\n    }\n    isZero() {\n        return this.value.isZero();\n    }\n    isEgld() {\n        return this.token.isEgld();\n    }\n    isSet() {\n        return !this.isZero();\n    }\n    /**\n     * Returns the string representation of the value (as EGLD currency).\n     */\n    toCurrencyString() {\n        return `${this.toDenominated()} ${this.token.getTokenIdentifier()}`;\n    }\n    toDenominated() {\n        return this.value.shiftedBy(-this.token.decimals).toFixed(this.token.decimals);\n    }\n    /**\n     * Returns the string representation of the value (its big-integer form).\n     */\n    toString() {\n        return this.value.toFixed();\n    }\n    /**\n     * Converts the balance to a pretty, plain JavaScript object.\n     */\n    toJSON() {\n        return {\n            asString: this.toString(),\n            asCurrencyString: this.toCurrencyString()\n        };\n    }\n    getNonce() {\n        return this.nonce;\n    }\n    valueOf() {\n        return this.value;\n    }\n    plus(other) {\n        this.checkSameToken(other);\n        return new Balance(this.token, this.nonce, this.value.plus(other.value));\n    }\n    minus(other) {\n        this.checkSameToken(other);\n        return new Balance(this.token, this.nonce, this.value.minus(other.value));\n    }\n    times(n) {\n        return new Balance(this.token, this.nonce, this.value.times(n));\n    }\n    div(n) {\n        return new Balance(this.token, this.nonce, this.value.div(n));\n    }\n    isEqualTo(other) {\n        this.checkSameToken(other);\n        return this.value.isEqualTo(other.value);\n    }\n    checkSameToken(other) {\n        if (this.token != other.token) {\n            throw new errors_1.ErrInvalidArgument(\"Different token types\");\n        }\n        if (!this.nonce.isEqualTo(other.nonce)) {\n            throw new errors_1.ErrInvalidArgument(\"Different nonces\");\n        }\n    }\n}\nexports.Balance = Balance;\n//# sourceMappingURL=balance.js.map"]},"metadata":{},"sourceType":"script"}